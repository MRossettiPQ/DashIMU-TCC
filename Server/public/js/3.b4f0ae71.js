(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"05a0":function(e,n,t){},"12d4":function(e,n,t){"use strict";t("4747")},"21f6":function(e,n,t){"use strict";t("35e7")},"31af":function(e,n,t){"use strict";t("05a0")},"35e7":function(e,n,t){},"3f01":function(e,n,t){},4747:function(e,n,t){},5846:function(e,n,t){"use strict";t("bd90")},6480:function(e,n,t){"use strict";t("a181")},"79a4":function(e,n,t){},"8cb9":function(e,n,t){"use strict";t("e912")},"982d":function(e,n,t){"use strict";t("b8fb")},a181:function(e,n,t){},ad26:function(e,n,t){},b2d9:function(e,n,t){},b8fb:function(e,n,t){},bd90:function(e,n,t){},c253:function(e,n,t){"use strict";t("79a4")},ce1f:function(e,n,t){"use strict";t("3f01")},d249:function(e,n,t){"use strict";t("ad26")},e912:function(e,n,t){},ed70:function(e,n,t){"use strict";t.r(n);var s,i,o,r,a,l,c,u,d,v,p,m,f,b,h,y=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("section",{staticClass:"responsive-height"},[e.fetchData.loading?n("loading-screen"):e.fetchData.hasError?n("error-screen"):null!==e.fetchData.result?n("div",{staticClass:"column responsive-content div-session h-100 w-100"},[n("stepper-header",{staticClass:"row",attrs:{navigation:e.navigation,session:e.session,"session-connection":e.sessionConnection,"is-tiny-screen":e.isTinyScreen,patient:e.fetchData.result.patient,"fetch-result":e.fetchResult,"save-result":e.saveResult,"in-dev":e.inDev},on:{"update:session":function(n){e.session=n}}}),n("transition",{staticClass:"row",attrs:{name:"slide-fade",mode:"out-in"}},[n(e.navigation.actualStepValue,{tag:"Component",attrs:{"session-connection":e.sessionConnection,"fetch-result":e.fetchResult,session:e.session,"is-tiny-screen":e.isTinyScreen,"loading-save":e.loadingSave,"save-result":e.saveResult,"in-dev":e.inDev},on:{"update:session":function(n){e.session=n}}})],1),n("stepper-footer",{staticClass:"row",attrs:{navigation:e.navigation,"session-connection":e.sessionConnection,session:e.session,"loading-save":e.loadingSave,"is-tiny-screen":e.isTinyScreen},on:{"update:session":function(n){e.session=n},save:e.saveSession}})],1):e._e()],1)},g=[],S=t("ded3"),C=t.n(S),k=t("7ec2"),_=t.n(k),w=t("c973"),O=t.n(w),x=t("c86f"),L=t.n(x),j=t("970b"),q=t.n(j),M=t("5bc3"),I=t.n(M),T=t("3c96"),P=t.n(T),R=t("ed6d"),D=t.n(R),A=t("2d0d"),z=t.n(A),B=t("9523"),N=t.n(B),Q=t("53ec"),E=t.n(Q),$=(t("d400"),t("99af"),t("14d9"),t("e260"),t("d3b7"),t("ddb0"),t("1b40")),V=t("2ef0"),G=t.n(V),Y=function(){var e,n,t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"w-100 row navigation-footer"},[s("q-btn",{staticClass:"row",attrs:{dense:"",round:"",color:"primary",disable:t.disablePrevButton,icon:"arrow_back_ios_new"},on:{click:function(e){return t.navigation.prev()}}}),"run-procedure"===(null===(e=t.navigation)||void 0===e?void 0:e.actualStepValue)?s("q-btn-group",{attrs:{rounded:"",flat:""}},[s("q-btn",{attrs:{dense:"",color:"primary",size:"md",unelevated:"",round:"",icon:"play_arrow",disable:t.sessionConnection.disableStartBtn},on:{click:function(e){return t.sessionConnection.start()}}}),s("q-btn",{attrs:{dense:"",color:"primary",size:"md",round:"",icon:"alarm",unelevated:"",disable:t.sessionConnection.disableStartBtn}},[s("q-menu",{attrs:{fit:""}},[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",[s("q-form",{ref:"mainForm",staticClass:"column form-lines form-lines__gap-sm",attrs:{greedy:""}},[s("q-checkbox",{attrs:{disable:t.sessionConnection.disableStartBtn,label:"Usar limitador"},model:{value:t.sessionConnection.useAlarm,callback:function(e){t.$set(t.sessionConnection,"useAlarm",e)},expression:"sessionConnection.useAlarm"}}),s("q-input",{staticClass:"col",attrs:{disable:t.sessionConnection.disableStartBtn,rules:[t.$validators.notBlank],filled:"",label:"Tempo máximo",suffix:"segundos"},model:{value:t.sessionConnection.alarmTime,callback:function(e){t.$set(t.sessionConnection,"alarmTime",e)},expression:"sessionConnection.alarmTime"}})],1)],1),s("q-item",[s("q-btn",{staticClass:"col",attrs:{dense:"",color:"primary",size:"md",unelevated:"",icon:"play_arrow",disable:t.sessionConnection.disableStartBtn},on:{click:function(e){return t.sessionConnection.start()}}})],1)],1)],1),s("q-tooltip",[t._v(" Temporizador")])],1),s("q-btn",{attrs:{dense:"",color:"primary",size:"md",icon:"stop",round:"",unelevated:"",disable:t.sessionConnection.disableStopBtn},on:{click:function(e){return t.sessionConnection.stop()}}}),s("q-btn",{attrs:{dense:"",color:"primary",size:"md",round:"",icon:"restart_alt",unelevated:"",disable:t.sessionConnection.disableRestartBtn},on:{click:function(e){return t.sessionConnection.restart()}}},[t.sessionConnection.disableRestartBtn?t._e():s("q-tooltip",[t._v("\n        Reiniciar medições, apaga as medições que não foram adicionadas ao\n        movimento\n      ")])],1),s("q-btn",{attrs:{dense:"",color:"primary",size:"md",icon:"done",round:"",unelevated:"",disable:t.disableAddMeasurement},on:{click:function(e){return t.addMeasurement()}}},[s("q-tooltip",[t._v("Concluir movimento")])],1)],1):t._e(),s("q-btn",{staticClass:"row",attrs:{dense:"",round:"",color:"primary",loading:t.loadingSave,disable:t.disableNextButton,icon:"run-procedure"!==(null===(n=t.navigation)||void 0===n?void 0:n.actualStepValue)?"arrow_forward_ios":"save"},on:{click:function(e){return t.navigation.next()}}})],1)},F=[],Z=t("2a19"),K=(s=Object($["a"])({name:"stepper-footer"}),i=Object($["c"])(),o=Object($["c"])(),r=Object($["c"])(),a=Object($["c"])(),l=Object($["d"])("session"),c=Object($["c"])({type:Boolean}),s((d=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"sessionConnection",v,P()(e)),L()(P()(e),"fetchResult",p,P()(e)),L()(P()(e),"navigation",m,P()(e)),L()(P()(e),"loadingSave",f,P()(e)),L()(P()(e),"syncedSession",b,P()(e)),L()(P()(e),"tinyScreen",h,P()(e)),e}return I()(t,[{key:"disableAddMeasurement",get:function(){return!(this.sessionConnection.numberOfMeasurements>0)||!!this.sessionConnection.disableStartBtn&&this.sessionConnection.inProgress}},{key:"addMeasurement",value:function(){this.sessionConnection.numberOfMeasurements>0?null!==this.syncedSession.running_movement?(this.syncedSession.addSensorsToMovement(this.sessionConnection.registeredSensorsList),Z["a"].create({message:"Medições adicionadas ao movimento",textColor:"white",color:"success"})):Z["a"].create({message:"Você deve selecionar o procedimento que esta sendo realizado, botão de configuração no topo!",textColor:"white",color:"warning"}):Z["a"].create({message:"Você deve ter captado alguma medição para completar esse procedimento!",textColor:"white",color:"warning"})}},{key:"disablePrevButton",get:function(){var e;switch(this.navigation.actualStepValue){case"init-session":return!0;case"run-procedure":return null===(e=this.sessionConnection)||void 0===e?void 0:e.inProgress;case"select-sensor":case"on-save":default:return!1}}},{key:"disableNextButton",get:function(){var e,n,t,s,i,o,r,a,l,c,u,d;switch(this.navigation.actualStepValue){case"init-session":return(null===(e=this.syncedSession)||void 0===e||null===(n=e.values)||void 0===n?void 0:n.movements.length)<1||(""===(null===(t=this.syncedSession)||void 0===t||null===(s=t.values)||void 0===s?void 0:s.procedure)||(null===(i=this.syncedSession)||void 0===i||null===(o=i.values)||void 0===o||null===(r=o.movements)||void 0===r?void 0:r.some((function(e){return""===e.type}))));case"select-sensor":return(null===(a=this.sessionConnection)||void 0===a?void 0:a.numberOfValidConnection)<(null===(l=this.syncedSession)||void 0===l?void 0:l.minSensor)||(null===(c=this.sessionConnection)||void 0===c?void 0:c.numberOfValidConnection)>(null===(u=this.syncedSession)||void 0===u?void 0:u.minSensor)||this.checkPositionBlank;case"run-procedure":return!(null===(d=this.sessionConnection)||void 0===d||!d.blockSave)||this.checkMovementsMeasurements;case"on-save":return!0;default:return!1}}},{key:"checkMovementsMeasurements",get:function(){var e,n,t,s,i;return(null===(e=this.syncedSession)||void 0===e||null===(n=e.values)||void 0===n?void 0:n.movements.length)<1||(null===(t=this.syncedSession)||void 0===t||null===(s=t.values)||void 0===s||null===(i=s.movements)||void 0===i?void 0:i.some((function(e){return e.sensors.length<1||e.sensors.some((function(e){return e.gyro_measurements.length<1}))})))}},{key:"checkPositionBlank",get:function(){return this.sessionConnection.registeredSensorsList.some((function(e){return""===e.position}))}}]),t}($["f"]),v=E()(d.prototype,"sessionConnection",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=E()(d.prototype,"fetchResult",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=E()(d.prototype,"navigation",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=E()(d.prototype,"loadingSave",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=E()(d.prototype,"syncedSession",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=E()(d.prototype,"tinyScreen",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=d))||u),X=K,U=X,H=(t("c253"),t("2877")),W=t("9c40"),J=t("e7a9"),ee=t("4e73"),ne=t("1c1c"),te=t("66e5"),se=t("0378"),ie=t("8f8e"),oe=t("27f9"),re=t("05c0"),ae=t("eebe"),le=t.n(ae),ce=Object(H["a"])(U,Y,F,!1,null,"0f357fa6",null),ue=ce.exports;le()(ce,"components",{QBtn:W["a"],QBtnGroup:J["a"],QMenu:ee["a"],QList:ne["a"],QItem:te["a"],QForm:se["a"],QCheckbox:ie["a"],QInput:oe["a"],QTooltip:re["a"]});var de,ve,pe,me,fe,be,he,ye=function(){var e,n,t,s=this,i=s._self._c;s._self._setupProxy;return i("div",{staticClass:"column"},[i("div",{staticClass:"row navigation-header w-100"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("span",{staticClass:"step-header__label"},[s._v(s._s(s.navigation.actualStepLabel))]),s.showActualMovement?i("span",{staticClass:"step-header__label"},[s._v("\n        : "+s._s(null===(e=s.syncedSession.actualRunningMovement)||void 0===e?void 0:e.label)+"\n      ")]):s._e()]),i("div",{staticClass:"notification"},[i("q-btn",{staticClass:"row icon-primary",attrs:{round:"",dense:"",unelevated:"",icon:"add"},on:{click:function(e){return s.sessionConnection.addTestReading()}}}),i("q-btn",{staticClass:"row icon-primary",attrs:{round:"",dense:"",unelevated:"",icon:"archive",disable:s.checkMovementsMeasurements&&"on-save"!==s.navigation.actualStepValue,"no-caps":""},on:{click:s.exportAll}}),i("q-btn",{staticClass:"row icon-primary",attrs:{round:"",dense:"",unelevated:"",loading:s.sessionConnection.loadingRequest,icon:null!==(n=s.sessionConnection)&&void 0!==n&&n.loadingRequest?"":"refresh"},on:{click:function(e){var n;null===(n=s.sessionConnection)||void 0===n||n.requestAvailableSensors()}}}),i("q-btn",{staticClass:"row disconnected",class:{connected:"connected"},attrs:{round:"",unelevated:"",dense:"",icon:s.connected?"sensors":"sensors_off"}}),i("q-btn",{staticClass:"row icon-primary",attrs:{round:"",dense:"",unelevated:"",size:"md",icon:"settings"}},[i("q-menu",{attrs:{fit:""}},[i("q-list",{staticStyle:{"min-width":"250px"}},[null!==(t=s.syncedSession.values.movements[0])&&void 0!==t&&t.type?i("q-item",[i("q-select",{staticClass:"col",attrs:{options:s.syncedSession.addedMovements,dense:"",label:"Procedimento atual",rules:[s.$validators.notBlank],"option-label":"label","option-value":"index"},model:{value:s.syncedSession.running_movement,callback:function(e){s.$set(s.syncedSession,"running_movement",e)},expression:"syncedSession.running_movement"}})],1):s._e(),i("q-item",[i("q-btn",{staticClass:"col",attrs:{dense:"",unelevated:"",label:"Resumo",disable:0===s.sessionConnection.numberOfMeasurements,"icon-right":"settings",color:"primary","no-caps":""},on:{click:s.openCheckMeasurements}})],1)],1)],1)],1)],1)]),"run-procedure"===s.navigation.actualStepValue?i("running-info",{attrs:{"session-connection":s.sessionConnection,"tiny-screen":s.tinyScreen}}):s._e()],1)},ge=[],Se=(t("159b"),t("b0c0"),t("ac1f"),t("5319"),function(){var e,n,t,s=this,i=s._self._c;s._self._setupProxy;return i("div",{staticClass:"column p-2 running-info"},[i("span",{staticClass:"timer-title"},[s._v("\n    "+s._s(s.$t("session.number_of_measurements"))+":\n    "),i("span",{staticClass:"timer-value"},[s._v("\n      "+s._s(null===(e=s.sessionConnection)||void 0===e?void 0:e.numberOfMeasurements)+"\n    ")])]),null!==(n=s.sessionConnection)&&void 0!==n&&n.time?i("span",{staticClass:"timer-title"},[s._v("\n    "+s._s(s.$t("session.runtime"))+":\n    "),i("div",{staticClass:"timer"},[i("q-icon",{attrs:{size:"xs",name:s.sessionConnection.useAlarm?"timer":"schedule",color:"primary"}}),i("span",{staticClass:"timer-value"},[s._v(s._s(null===(t=s.sessionConnection)||void 0===t?void 0:t.timeRunning))])],1)]):s._e()])}),Ce=[],ke=(de=Object($["a"])({name:"running-info"}),ve=Object($["c"])(),pe=Object($["c"])({type:Boolean}),de((fe=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"sessionConnection",be,P()(e)),L()(P()(e),"tinyScreen",he,P()(e)),e}return I()(t)}($["f"]),be=E()(fe.prototype,"sessionConnection",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=E()(fe.prototype,"tinyScreen",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=fe))||me),_e=ke,we=_e,Oe=(t("8cb9"),t("0016")),xe=Object(H["a"])(we,Se,Ce,!1,null,"5f3c7eaa",null),Le=xe.exports;le()(xe,"components",{QIcon:Oe["a"]});var je,qe,Me,Ie,Te,Pe,Re,De,Ae,ze,Be,Ne,Qe,Ee,$e,Ve,Ge,Ye,Fe,Ze,Ke,Xe,Ue,He,We,Je,en,nn,tn=t("c1df"),sn=t.n(tn),on=(t("a15b"),t("d81d"),t("a357")),rn=function(){function e(n,t,s,i){q()(this,e),this.tableColumns=n,this.errorNotification=s,this.successNotification=i,this.loading=!1}return I()(e,[{key:"export",value:function(){var e=O()(_()().mark((function e(){var n,t,s,i,o,r=this,a=arguments;return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=function(e,n){var t=void 0!==n?n(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),'"'.concat(t,'"')},n=a.length>0&&void 0!==a[0]?a[0]:[],t=a.length>1&&void 0!==a[1]?a[1]:"csvFile";try{this.loading=!0,i=[this.tableColumns.map((function(e){return s(e.label)}))].concat(n.map((function(e){return r.tableColumns.map((function(n){return s("function"===typeof n.field?n.field(e):e[(n.field,n.field)],n.format)})).join(",")}))).join("\r\n"),o=Object(on["a"])("".concat(t,".csv"),i,"text/csv"),!0!==o&&this.errorNotification?this.errorNotification():this.successNotification&&this.successNotification()}catch(l){console.log(l)}finally{this.loading=!1}case 4:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()}]),e}(),an=function(){function e(){q()(this,e)}return I()(e,null,[{key:"create",value:function(e){var n=e.tableColumns,t=void 0===n?[]:n,s=e.errorNotification,i=void 0===s?null:s,o=e.successNotification,r=void 0===o?null:o;return new rn(t,i,r)}}]),e}(),ln=t("d698"),cn=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("q-dialog",{ref:"dialog",attrs:{"full-height":"","full-width":""}},[n("q-card",{staticClass:"column"},[n("q-card",{staticClass:"dialog-header"},[n("div",{staticClass:"text-h6"},[e._v("Relação de movimentos e medições realizadas")]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",dense:"",flat:"",size:"md"}})],1),n("q-table",{staticClass:"col",attrs:{columns:e.columns,data:e.sessionData,loading:e.loading,flat:""}}),n("q-card",{staticClass:"dialog-actions flex",staticStyle:{padding:"12px","justify-content":"flex-end"}},[n("q-btn",{attrs:{label:"Alterar",color:"primary",dense:"",unelevated:""}})],1)],1)],1)},un=[],dn=(t("cca6"),t("7db0"),je=Object($["a"])({name:"check-measurements-dialog"}),qe=Object($["e"])("dialog"),Me=Object($["c"])(),je((Te=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"dialog",Pe,P()(e)),L()(P()(e),"session",Re,P()(e)),N()(P()(e),"loading",!1),N()(P()(e),"sessionData",[]),N()(P()(e),"columns",[{name:"movement",align:"left",label:e.$t("session.movement_column"),field:"type",sortable:!0}]),e}return I()(t,[{key:"show",value:function(){this.dialog.show()}},{key:"hide",value:function(e){this.$emit("ok",e||!0),this.dialog.hide()}},{key:"beforeMount",value:function(){var e=O()(_()().mark((function e(){var n=this;return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.session.values.movements.forEach((function(e){var t={type:e.type};if(0===(null===e||void 0===e?void 0:e.sensors.length)){var s="error";Object.hasOwnProperty.call(t,"".concat(s))&&(Object.assign(t,s),t[s]=n.$t("session.no_number_of_measurements"),n.columns.push({name:s,align:"left",label:"Erro",field:s,sortable:!0}))}null===e||void 0===e||e.sensors.forEach((function(e,s){var i="sensor-".concat(s),o=n.columns.find((function(e){return e.field===i}));if(!o){Object.assign(t,i);var r=n.$t("session.measurement_quantity_column")+" do sensor ".concat(s);n.columns.push({name:i,align:"left",label:r,field:i,sortable:!0})}t[i]=e.gyro_measurements.length})),n.sessionData.push(t)}));case 1:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}()}]),t}($["f"]),Pe=E()(Te.prototype,"dialog",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=E()(Te.prototype,"session",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=Te))||Ie),vn=dn,pn=vn,mn=(t("f137"),t("24e8")),fn=t("f09f"),bn=t("eaac"),hn=t("7f67"),yn=Object(H["a"])(pn,cn,un,!1,null,"731ad15a",null),gn=yn.exports;le()(yn,"components",{QDialog:mn["a"],QCard:fn["a"],QBtn:W["a"],QTable:bn["a"]}),le()(yn,"directives",{ClosePopup:hn["a"]});var Sn=(De=Object($["a"])({name:"stepper-header",components:{RunningInfo:Le}}),Ae=Object($["c"])({type:Boolean}),ze=Object($["c"])(),Be=Object($["d"])("session"),Ne=Object($["c"])(),Qe=Object($["c"])(),Ee=Object($["c"])(),$e=Object($["c"])({type:Boolean}),Ve=Object($["c"])(),Ge=Object($["c"])(),De((Fe=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"tinyScreen",Ze,P()(e)),L()(P()(e),"sessionConnection",Ke,P()(e)),L()(P()(e),"syncedSession",Xe,P()(e)),L()(P()(e),"navigation",Ue,P()(e)),L()(P()(e),"inDev",He,P()(e)),L()(P()(e),"fetchResult",We,P()(e)),L()(P()(e),"isTinyScreen",Je,P()(e)),L()(P()(e),"patient",en,P()(e)),N()(P()(e),"exportFile",null),L()(P()(e),"saveResult",nn,P()(e)),e}return I()(t,[{key:"connected",get:function(){var e;return null===(e=this.sessionConnection)||void 0===e?void 0:e.isConnectedBackend}},{key:"showActualMovement",get:function(){var e;return!(null===(e=this.syncedSession.actualRunningMovement)||void 0===e||!e.label)&&"run-procedure"===this.navigation.actualStepValue}},{key:"notification",value:function(e,n){Z["a"].create({message:e,color:n,textColor:"white"})}},{key:"mounted",value:function(){var e=this;this.exportFile=an.create({tableColumns:this.tableColumns,errorNotification:function(){return e.notification("Error","negative")},successNotification:function(){return e.notification("Exportado","positive")}})}},{key:"exportOnSave",value:function(){var e=this;try{this.saveResult&&(console.log(this.saveResult),this.saveResult.result.forEach((function(n){console.log(n),n.movement.sensors.forEach(function(){var t=O()(_()().mark((function t(s){var i;return _()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i="".concat(e.patient.name,"_").concat(n.movement.type,"_").concat(s.sensorName.replace(/\s/g,""),"_").concat(sn.a.now()),t.next=4,e.exportFile.export(s.gyro_measurements,i);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())})))}catch(n){console.log(n)}}},{key:"exportOnScreen",value:function(){var e=this;try{if(this.checkMovementsMeasurements)return void Z["a"].create({message:"Não foram adicionadas medições aos movimentos selecionados",textColor:"white",color:"warning"});this.syncedSession.addedMovements.forEach((function(n){console.log(n),n.sensors.forEach(function(){var t=O()(_()().mark((function t(s){var i;return _()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i="".concat(e.patient.name,"_").concat(n.type,"_").concat(s.sensorName.replace(/\s/g,""),"_").concat(sn.a.now()),t.next=4,e.exportFile.export(s.gyro_measurements,i);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())}))}catch(n){console.log(n)}}},{key:"exportAll",value:function(){"on-save"===this.navigation.actualStepValue?this.exportOnSave():this.exportOnScreen()}},{key:"checkMovementsMeasurements",get:function(){var e,n,t,s,i;return(null===(e=this.syncedSession)||void 0===e||null===(n=e.values)||void 0===n?void 0:n.movements.length)<1||(null===(t=this.syncedSession)||void 0===t||null===(s=t.values)||void 0===s||null===(i=s.movements)||void 0===i?void 0:i.some((function(e){return e.sensors.length<1||e.sensors.some((function(e){return e.gyro_measurements.length<1}))})))}},{key:"openCheckMeasurements",value:function(){var e=O()(_()().mark((function e(){return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ln["a"].asyncDialog(gn,{session:this.syncedSession});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function n(){return e.apply(this,arguments)}return n}()}]),t}($["f"]),Ze=E()(Fe.prototype,"tinyScreen",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=E()(Fe.prototype,"sessionConnection",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=E()(Fe.prototype,"syncedSession",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=E()(Fe.prototype,"navigation",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=E()(Fe.prototype,"inDev",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=E()(Fe.prototype,"fetchResult",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=E()(Fe.prototype,"isTinyScreen",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=E()(Fe.prototype,"patient",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=E()(Fe.prototype,"saveResult",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=Fe))||Ye),Cn=Sn,kn=Cn,_n=(t("31af"),t("ddd8")),wn=Object(H["a"])(kn,ye,ge,!1,null,"c519e54a",null),On=wn.exports;le()(wn,"components",{QBtn:W["a"],QMenu:ee["a"],QList:ne["a"],QItem:te["a"],QSelect:_n["a"]});var xn,Ln,jn,qn,Mn,In,Tn,Pn,Rn,Dn,An,zn,Bn,Nn,Qn,En,$n,Vn=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("div",{staticClass:"column select-sensor h-100 w-100"},[n("div",{staticClass:"column p-b-16",staticStyle:{gap:"6px"}},[n("span",[e._v(" Mínimo de sensores: "+e._s(e.syncedSession.minSensor)+" ")]),n("span",[e._v("\n      Sensores conectados: "+e._s(e.sessionConnection.numberOfValidConnection)+"\n    ")])]),n("div",{staticClass:"row sensor-list w-100"},[e._l(e.sessionConnection.filterSensorsConnected,(function(t,s){return n("sensor-available",{key:"available-".concat(s),staticClass:"col sensor-available",attrs:{sensor:t,"registered-sensors-list":e.sessionConnection.registeredSensorsList,"is-tiny-screen":e.isTinyScreen,"session-connection":e.sessionConnection,session:e.syncedSession},on:{"update:registeredSensorsList":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)},"update:registered-sensors-list":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)},"update:session":function(n){e.syncedSession=n},connect:function(n){return e.sessionConnection.connect(n)},disconnect:function(n){return e.sessionConnection.disconnect(n)},calibrate:function(n){return e.sessionConnection.calibrate(n)},remove:function(n){return e.sessionConnection.remove(n)}}})})),e._l(e.sessionConnection.registeredSensorsList,(function(t,s){return n("sensor-registered",{key:"connected-".concat(s),staticClass:"col sensor-available",attrs:{"registered-sensors-list":e.sessionConnection.registeredSensorsList,sensor:t,"is-tiny-screen":e.isTinyScreen,session:e.syncedSession,"session-connection":e.sessionConnection},on:{"update:registeredSensorsList":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)},"update:registered-sensors-list":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)},"update:session":function(n){e.syncedSession=n},connect:function(n){return e.sessionConnection.connect(n)},disconnect:function(n){return e.sessionConnection.disconnect(n)},calibrate:function(n){return e.sessionConnection.calibrate(n)},remove:function(n){return e.sessionConnection.remove(n)}}})}))],2)])},Gn=[],Yn=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("q-item",{staticClass:"item item__inactive",class:{connected:"item__active"}},[n("q-item-section",{staticClass:"col"},[n("q-item-label",[e._v("Conectado")]),n("q-item-label",[e._v(e._s(e.sensor.sensorName))]),n("q-item-label",{attrs:{caption:""}},[e._v("\n      "+e._s(e.sensor.device.ip)+"\n    ")]),e.measurementNumber>0?n("q-item-label",[e._v("\n      Medições armazenadas: "+e._s(e.measurementNumber)+"\n    ")]):e._e(),n("q-select",{staticClass:"col",attrs:{options:e.syncedSession.getPositions,"emit-value":"",borderless:"",dense:"",label:e.$t("session.positions"),rules:[e.$validators.notBlank],"option-label":"label","option-value":"value"},on:{input:function(n){return e.update(n)}},model:{value:e.sensor.position,callback:function(n){e.$set(e.sensor,"position",n)},expression:"sensor.position"}})],1),n("q-item-section",{staticClass:"col menu",staticStyle:{"margin-left":"0px !important"}},[n("q-btn",{attrs:{dense:"",flat:"",icon:"done",color:"primary",disable:e.connected,"aria-label":"Conectar",round:""},on:{click:e.connect}}),n("q-btn",{attrs:{dense:"",flat:"",icon:"close",color:"primary",disable:!e.connected,round:""},on:{click:e.disconnect}}),n("q-btn",{attrs:{dense:"",flat:"",icon:"more_vert",color:"primary"}},[n("q-menu",[n("q-list",{staticClass:"column",staticStyle:{"min-width":"100px",gap:"6px"}},e._l(e.menuSensor,(function(t,s){return n("q-btn",{key:s,attrs:{dense:"",flat:"",icon:t.icon,label:t.label,color:"primary",disable:!e.connected&&t.needConnected,align:"between"},on:{click:t.fn}})})),1)],1)],1)],1)],1)},Fn=[],Zn=(t("e439"),xn=Object($["a"])({name:"sensor-registered"}),Ln=Object($["c"])({type:Object}),jn=Object($["c"])({type:Boolean}),qn=Object($["d"])("session"),Mn=Object($["d"])("registeredSensorsList",{type:Array,default:[]}),In=Object($["c"])(),Tn=Object($["b"])("connect"),Pn=Object($["b"])("disconnect"),Rn=Object($["b"])("calibrate"),Dn=Object($["b"])("remove"),xn((zn=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"sensor",Bn,P()(e)),L()(P()(e),"isTinyScreen",Nn,P()(e)),L()(P()(e),"syncedSession",Qn,P()(e)),L()(P()(e),"syncRegisteredSensorsList",En,P()(e)),L()(P()(e),"sessionConnection",$n,P()(e)),e}return I()(t,[{key:"connected",get:function(){var e,n;return null===(e=this.sensor)||void 0===e||null===(n=e.device)||void 0===n?void 0:n.active}},{key:"nameSensor",get:function(){var e;return null===(e=this.sensor)||void 0===e?void 0:e.nameSensor}},{key:"measurementNumber",get:function(){var e,n;return null===(e=this.sensor)||void 0===e||null===(n=e.gyro_measurements)||void 0===n?void 0:n.length}},{key:"update",value:function(e){this.sessionConnection.updateSensor({position:e,sensor:this.sensor.device})}},{key:"connect",value:function(){return this.sensor.device}},{key:"disconnect",value:function(){return this.sensor.device}},{key:"calibrate",value:function(){return this.sensor.device}},{key:"remove",value:function(){return this.sensor.device}},{key:"menuSensor",get:function(){var e=this,n=[{label:"Calibrate",icon:"iso",needConnected:!0,fn:function(){return e.calibrate()}},{label:"Delete",icon:"delete",needConnected:!1,fn:function(){return e.remove()}}];return n}}]),t}($["f"]),Bn=E()(zn.prototype,"sensor",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=E()(zn.prototype,"isTinyScreen",[jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qn=E()(zn.prototype,"syncedSession",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),En=E()(zn.prototype,"syncRegisteredSensorsList",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$n=E()(zn.prototype,"sessionConnection",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E()(zn.prototype,"connect",[Tn],Object.getOwnPropertyDescriptor(zn.prototype,"connect"),zn.prototype),E()(zn.prototype,"disconnect",[Pn],Object.getOwnPropertyDescriptor(zn.prototype,"disconnect"),zn.prototype),E()(zn.prototype,"calibrate",[Rn],Object.getOwnPropertyDescriptor(zn.prototype,"calibrate"),zn.prototype),E()(zn.prototype,"remove",[Dn],Object.getOwnPropertyDescriptor(zn.prototype,"remove"),zn.prototype),An=zn))||An),Kn=Zn,Xn=Kn,Un=(t("982d"),t("4074")),Hn=t("0170"),Wn=Object(H["a"])(Xn,Yn,Fn,!1,null,"025599f7",null),Jn=Wn.exports;le()(Wn,"components",{QItem:te["a"],QItemSection:Un["a"],QItemLabel:Hn["a"],QSelect:_n["a"],QBtn:W["a"],QMenu:ee["a"],QList:ne["a"]});var et,nt,tt,st,it,ot,rt,at,lt,ct,ut,dt,vt,pt,mt,ft,bt,ht,yt,gt,St,Ct,kt,_t,wt,Ot=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("q-item",{staticClass:"item item__inactive",class:{connected:"item__active"}},[n("q-item-section",{staticClass:"col"},[n("q-item-label",[e._v(e._s(e.nameSensor))]),n("q-item-label",{attrs:{caption:""}},[e._v("\n      "+e._s(e.sensor.ip)+"\n    ")]),e.measurementNumber>0?n("q-item-label",[e._v("\n      Medições armazenadas: "+e._s(e.measurementNumber)+"\n    ")]):e._e(),e.connected?n("q-select",{staticClass:"col",attrs:{options:e.syncedSession.getPositions,"emit-value":"",borderless:"",dense:"",label:e.$t("session.positions"),rules:[e.$validators.notBlank],"option-label":"label","option-value":"value"},model:{value:e.sensor.position,callback:function(n){e.$set(e.sensor,"position",n)},expression:"sensor.position"}}):e._e()],1),n("q-item-section",{staticClass:"col menu",staticStyle:{"margin-left":"0px !important"}},[n("q-btn",{attrs:{dense:"",flat:"",icon:"done",color:"primary",disable:e.connected,"aria-label":"Conectar",round:""},on:{click:e.connect}}),n("q-btn",{attrs:{dense:"",flat:"",icon:"close",color:"primary",disable:!e.connected,round:""},on:{click:e.disconnect}}),n("q-btn",{attrs:{dense:"",flat:"",icon:"more_vert",color:"primary",disable:!e.connected}},[n("q-menu",[n("q-list",{staticClass:"column",staticStyle:{"min-width":"100px",gap:"6px"}},e._l(e.menuSensor,(function(t,s){return n("q-btn",{key:s,attrs:{dense:"",flat:"",icon:t.icon,label:t.label,color:"primary",disable:!e.connected},on:{click:e.calibrate}})})),1)],1)],1)],1)],1)},xt=[],Lt=(et=Object($["a"])({name:"sensor-available"}),nt=Object($["c"])({type:Object}),tt=Object($["c"])({type:Boolean}),st=Object($["d"])("registeredSensorsList",{type:Array,default:[]}),it=Object($["d"])("session"),ot=Object($["b"])("connect"),rt=Object($["b"])("disconnect"),at=Object($["b"])("calibrate"),et((ct=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"sensor",ut,P()(e)),L()(P()(e),"isTinyScreen",dt,P()(e)),L()(P()(e),"syncRegisteredSensorsList",vt,P()(e)),L()(P()(e),"syncedSession",pt,P()(e)),e}return I()(t,[{key:"stateSensorInConnectedList",get:function(){var e,n=this;return null===(e=this.syncRegisteredSensorsList)||void 0===e?void 0:e.find((function(e){var t,s;return(null===e||void 0===e||null===(t=e.device)||void 0===t?void 0:t.ip)===(null===(s=n.sensor)||void 0===s?void 0:s.ip)}))}},{key:"connected",get:function(){var e,n;return!(null===(e=this.stateSensorInConnectedList)||void 0===e||null===(n=e.device)||void 0===n||!n.active)}},{key:"nameSensor",get:function(){var e;return null===(e=this.sensor)||void 0===e?void 0:e.nameSensor}},{key:"measurementNumber",get:function(){var e,n;return null===(e=this.stateSensorInConnectedList)||void 0===e||null===(n=e.gyro_measurements)||void 0===n?void 0:n.length}},{key:"connect",value:function(){return this.sensor}},{key:"disconnect",value:function(){return this.sensor}},{key:"calibrate",value:function(){return this.sensor}},{key:"menuSensor",get:function(){var e=[{label:"Calibrate",icon:"iso"}];return e}}]),t}($["f"]),ut=E()(ct.prototype,"sensor",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=E()(ct.prototype,"isTinyScreen",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=E()(ct.prototype,"syncRegisteredSensorsList",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=E()(ct.prototype,"syncedSession",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E()(ct.prototype,"connect",[ot],Object.getOwnPropertyDescriptor(ct.prototype,"connect"),ct.prototype),E()(ct.prototype,"disconnect",[rt],Object.getOwnPropertyDescriptor(ct.prototype,"disconnect"),ct.prototype),E()(ct.prototype,"calibrate",[at],Object.getOwnPropertyDescriptor(ct.prototype,"calibrate"),ct.prototype),lt=ct))||lt),jt=Lt,qt=jt,Mt=(t("6480"),Object(H["a"])(qt,Ot,xt,!1,null,"ec522a44",null)),It=Mt.exports;le()(Mt,"components",{QItem:te["a"],QItemSection:Un["a"],QItemLabel:Hn["a"],QSelect:_n["a"],QBtn:W["a"],QMenu:ee["a"],QList:ne["a"]});var Tt,Pt,Rt,Dt,At,zt,Bt,Nt,Qt,Et,$t,Vt,Gt,Yt,Ft,Zt,Kt,Xt,Ut,Ht,Wt,Jt,es,ns,ts,ss,is,os,rs,as,ls,cs,us=(mt=Object($["a"])({name:"select-sensor",components:{SensorRegistered:Jn,SensorAvailable:It}}),ft=Object($["c"])(),bt=Object($["d"])("session"),ht=Object($["c"])(),yt=Object($["c"])({type:Boolean}),mt((St=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"sessionConnection",Ct,P()(e)),L()(P()(e),"syncedSession",kt,P()(e)),L()(P()(e),"inDev",_t,P()(e)),L()(P()(e),"isTinyScreen",wt,P()(e)),e}return I()(t)}($["f"]),Ct=E()(St.prototype,"sessionConnection",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=E()(St.prototype,"syncedSession",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=E()(St.prototype,"inDev",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=E()(St.prototype,"isTinyScreen",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=St))||gt),ds=us,vs=ds,ps=(t("5846"),Object(H["a"])(vs,Vn,Gn,!1,null,"55d597b3",null)),ms=ps.exports,fs=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("div",{staticClass:"run-procedure"},[n("q-tabs",{staticClass:"text-grey",attrs:{vertical:"","active-color":"primary","indicator-color":"primary","narrow-indicator":""},model:{value:e.tabPanel,callback:function(n){e.tabPanel=n},expression:"tabPanel"}},[n("q-tab",{staticClass:"custom-tab",attrs:{icon:"leaderboard",name:"GRAPH",label:e.$t("session.tab")}}),e._l(e.sessionConnection.registeredSensorsList,(function(e,t){return n("q-tab",{key:t,staticClass:"custom-tab",attrs:{icon:"table_rows",label:"Tabela "+e.device.id,name:"Tab_"+e.device.id}})}))],2),n("q-tab-panels",{staticClass:"row h-100",attrs:{animated:""},model:{value:e.tabPanel,callback:function(n){e.tabPanel=n},expression:"tabPanel"}},[n("q-tab-panel",{staticClass:"h-100 w-100 justify-center items-center",attrs:{name:"GRAPH"}},[e.sessionConnection.numberOfMeasurements>0?n("tab-graph",{attrs:{"registered-sensors-list":e.sessionConnection.registeredSensorsList,"is-tiny-screen":e.isTinyScreen,"session-state":e.sessionConnection},on:{"update:registeredSensorsList":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)},"update:registered-sensors-list":function(n){return e.$set(e.sessionConnection,"registeredSensorsList",n)}}}):n("div",{staticClass:"column div-lottie"},[n("lottie-vue-player",{staticClass:"lottie",attrs:{src:"/lottie/chart-reports.json",autoplay:!0,loop:!0,speed:1}}),n("span",{staticClass:"text-black"},[e._v("\n          "+e._s(e.$t("session.graphic_temporarily_unavailable"))+"\n        ")])],1)],1),e._l(e.sessionConnection.registeredSensorsList,(function(t,s){return n("q-tab-panel",{key:s,staticClass:"h-100 w-100 justify-center items-center",attrs:{name:"Tab_"+t.device.id}},[n("tab-measurement-table",{attrs:{sensor:t,"all-sensor":e.sessionConnection.registeredSensorsList,patient:e.patient,label:"".concat(e.$t("session.spreadsheet")," ").concat(t.device.id),"table-columns":e.tableColumns}})],1)}))],2)],1)},bs=[],hs=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("div",{staticClass:"column h-100 w-100"},[n("div",{staticClass:"column h-100 w-100 div-vc"},[n("div",{ref:"eChart",staticClass:"chart",attrs:{id:"eChart"}})])])},ys=[],gs=(t("c740"),t("25f0"),function(){function e(n,t,s,i,o){q()(this,e),this.dataId=n,this.charDataId=t,this.charDataValuesKey=s,this.charDataNameKey=i,this.columns=o,this.chartData=[],this.setedOption={series:[]},this.defaultOptions={toolbox:{feature:{restore:{},saveAsImage:{},dataView:{readOnly:!0},magicType:{type:["line","bar"]}}},tooltip:{order:"valueDesc",trigger:"axis"},yAxis:{boundaryGap:[0,"100%"],type:"value"},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!0}},dataZoom:[{type:"inside",start:0,end:10},{start:0,end:10}]}}return I()(e,[{key:"getColumn",value:function(e,n){return e.map((function(e){return e["".concat(n)]}))}},{key:"getIndexChartData",value:function(e){var n,t=this;return null===(n=this.chartData)||void 0===n?void 0:n.findIndex((function(n){return n[t.charDataId]===e}))}},{key:"set",value:function(e){var n,t=this;return this.chartData=e,null!==(n=this.chartData)&&void 0!==n&&n.length&&this.chartData.map((function(e){t.columns.forEach((function(n){var s=t.getColumn(e[t.charDataValuesKey],n);t.setedOption.series.push({idSerie:e[t.dataId],colName:e[t.charDataValuesKey],name:"".concat(e[t.charDataNameKey]," - ").concat(n),type:"line",symbol:"none",sampling:"lttb",itemStyle:{color:"#"+parseInt(16777215*Math.random()).toString(16)},data:s})}))})),C()(C()({},this.defaultOptions),this.setedOption)}},{key:"getUpdateOptions",value:function(e){var n,t,s,i,o=this;(this.chartData=e,null!==(n=this.setedOption)&&void 0!==n&&null!==(t=n.series)&&void 0!==t&&t.length)&&(null===(s=this.setedOption)||void 0===s||null===(i=s.series)||void 0===i||i.forEach((function(e,n){var t=o.getIndexChartData(e.idSerie);-1!==t&&(o.setedOption.series[n].data=o.getColumn(o.chartData[t],e.colName))})));return this.setedOption}}]),e}()),Ss=function(){function e(){q()(this,e)}return I()(e,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.dataId,t=e.charDataId,s=e.charDataValuesKey,i=e.charDataNameKey,o=e.columns;return new gs(n,t,s,i,o)}}]),e}(),Cs=t("313e"),ks=t("e302"),_s=(Tt=Object($["a"])({name:"tab-graph"}),Pt=Object($["c"])({type:Boolean}),Rt=Object($["c"])(),Dt=Object($["d"])("registeredSensorsList",{type:Array,default:[]}),At=Object($["e"])("eChart"),zt=Object($["g"])("sessionState.numberOfMeasurements"),Tt((Nt=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"isTinyScreen",Qt,P()(e)),L()(P()(e),"sessionState",Et,P()(e)),L()(P()(e),"syncRegisteredSensorsList",$t,P()(e)),L()(P()(e),"eChart",Vt,P()(e)),N()(P()(e),"testChart",Ss.create({charDataId:"device.ip",dataId:"ip",charDataValuesKey:"gyro_measurements",charDataNameKey:"sensorName",columns:["Roll","Pitch","Yaw"]})),N()(P()(e),"updateChart",Object(ks["a"])((function(n){console.log("updateChart");var t=e.testChart.set(n);e.setOption(t)}),5e3)),e}return I()(t,[{key:"update",value:function(){this.updateChart(this.sessionState.registeredSensorsList)}},{key:"setOption",value:function(e){this.chart.setOption(e)}},{key:"mounted",value:function(){this.chart=Cs["b"](document.getElementById("eChart"),null,{renderer:"canvas"});var e=this.testChart.set(this.sessionState.registeredSensorsList);this.setOption(e)}}]),t}($["f"]),Qt=E()(Nt.prototype,"isTinyScreen",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=E()(Nt.prototype,"sessionState",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=E()(Nt.prototype,"syncRegisteredSensorsList",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=E()(Nt.prototype,"eChart",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E()(Nt.prototype,"update",[zt],Object.getOwnPropertyDescriptor(Nt.prototype,"update"),Nt.prototype),Bt=Nt))||Bt),ws=_s,Os=ws,xs=(t("ce1f"),Object(H["a"])(Os,hs,ys,!1,null,"407ed02e",null)),Ls=xs.exports,js=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("q-table",{staticClass:"h-100 w-100",attrs:{columns:e.tableColumns,data:e.dataTableMeasurement,color:"primary",flat:"",bordered:""}})},qs=[],Ms=(Gt=Object($["a"])({name:"tab-measurement-table"}),Yt=Object($["c"])({type:Boolean}),Ft=Object($["c"])(),Zt=Object($["c"])({type:Array,default:[]}),Gt((Xt=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"isTinyScreen",Ut,P()(e)),L()(P()(e),"sensor",Ht,P()(e)),L()(P()(e),"tableColumns",Wt,P()(e)),e}return I()(t,[{key:"dataTableMeasurement",get:function(){var e;return null===(e=this.sensor)||void 0===e?void 0:e.gyro_measurements}}]),t}($["f"]),Ut=E()(Xt.prototype,"isTinyScreen",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=E()(Xt.prototype,"sensor",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=E()(Xt.prototype,"tableColumns",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=Xt))||Kt),Is=Ms,Ts=Is,Ps=Object(H["a"])(Ts,js,qs,!1,null,null,null),Rs=Ps.exports;le()(Ps,"components",{QTable:bn["a"]});var Ds=(Jt=Object($["a"])({name:"run-procedure",components:{TabGraph:Ls,TabMeasurementTable:Rs}}),es=Object($["c"])({type:Boolean}),ns=Object($["c"])(),ts=Object($["c"])({type:Object}),ss=Object($["c"])(),Jt((os=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"isTinyScreen",rs,P()(e)),L()(P()(e),"sessionConnection",as,P()(e)),L()(P()(e),"patient",ls,P()(e)),L()(P()(e),"inDev",cs,P()(e)),N()(P()(e),"tabPanel","GRAPH"),N()(P()(e),"tableColumns",[{align:"center",field:"sensorName",label:"sensorName"},{align:"center",field:"numberMensuration",label:"numberMensuration"},{align:"center",field:"Acc_X",label:"Acc_X",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Acc_Y",label:"Acc_Y",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Acc_Z",label:"Acc_Z",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Gyr_X",label:"Gyr_X",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Gyr_Y",label:"Gyr_Y",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Gyr_Z",label:"Gyr_Z",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Roll",label:"Roll",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Pitch",label:"Pitch",format:function(e){return"".concat(Math.ceil(e))}},{align:"center",field:"Yaw",label:"Yaw",format:function(e){return"".concat(Math.ceil(e))}}]),e}return I()(t)}($["f"]),rs=E()(os.prototype,"isTinyScreen",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),as=E()(os.prototype,"sessionConnection",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ls=E()(os.prototype,"patient",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cs=E()(os.prototype,"inDev",[ss],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=os))||is),As=Ds,zs=As,Bs=(t("21f6"),t("429b")),Ns=t("7460"),Qs=t("adad"),Es=t("823b"),$s=Object(H["a"])(zs,fs,bs,!1,null,"24713944",null),Vs=$s.exports;le()($s,"components",{QTabs:Bs["a"],QTab:Ns["a"],QTabPanels:Qs["a"],QTabPanel:Es["a"]});t("a4d3"),t("e01a");var Gs,Ys,Fs,Zs,Ks,Xs,Us,Hs,Ws,Js,ei,ni=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("div",{staticClass:"column div-step"},[n("q-form",{ref:"mainForm",staticClass:"column",staticStyle:{display:"flex",gap:"8px"},attrs:{greedy:""}},[n("q-select",{staticClass:"row",attrs:{options:e.syncedSession.procedures,"emit-value":"",dense:"",filled:"",label:e.$t("session.procedure"),rules:[e.$validators.notBlank],"option-label":"articulation_name","option-value":"value"},on:{input:function(n){return e.session.selectProcedure(n)}},model:{value:e.syncedSession.values.procedure,callback:function(n){e.$set(e.syncedSession.values,"procedure",n)},expression:"syncedSession.values.procedure"}}),e.syncedSession.procedureSelected?n("div",{staticClass:"row column w-100",staticStyle:{display:"flex",gap:"8px"}},[e._l(e.syncedSession.values.movements,(function(t,s){return n("div",{key:s,staticClass:"column info-card w-100"},[n("div",{staticClass:"col items-center",staticStyle:{display:"flex","flex-direction":"row"}},[n("div",{staticClass:"col"},[n("div",{staticClass:"col column"},[n("q-select",{attrs:{options:e.session.getMovementsList,"emit-value":"",dense:"",filled:"",label:e.$t("session.movement"),rules:[e.$validators.notBlank],"option-label":"movement_name","option-value":"value"},on:{input:function(n){return e.session.selectMovement(n,s)}},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"m.type"}}),t?n("span",[e._v(e._s(t.description))]):e._e()],1),t.image?n("div",{staticClass:"col img-center"},[n("q-img",{staticClass:"img-div",attrs:{src:t.image}})],1):e._e()]),n("div",[n("q-btn",{attrs:{size:"md",flat:"",round:"",icon:"delete",color:"red",unelevated:""},on:{click:function(n){return e.syncedSession.removeMovement(s)}}})],1)])])})),n("q-btn",{staticClass:"col",attrs:{unelevated:"",outline:"",dense:"",label:"Adicionar movimento"},on:{click:function(n){return e.syncedSession.addMovement()}}})],2):e._e()],1)],1)},ti=[],si=(Gs=Object($["a"])({name:"init-session"}),Ys=Object($["d"])("session"),Fs=Object($["c"])({type:Boolean}),Zs=Object($["c"])(),Ks=Object($["c"])(),Gs((Us=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"syncedSession",Hs,P()(e)),L()(P()(e),"isTinyScreen",Ws,P()(e)),L()(P()(e),"inDev",Js,P()(e)),L()(P()(e),"fetchResult",ei,P()(e)),e}return I()(t)}($["f"]),Hs=E()(Us.prototype,"syncedSession",[Ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ws=E()(Us.prototype,"isTinyScreen",[Fs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Js=E()(Us.prototype,"inDev",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ei=E()(Us.prototype,"fetchResult",[Ks],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xs=Us))||Xs),ii=si,oi=ii,ri=(t("d249"),t("068f")),ai=Object(H["a"])(oi,ni,ti,!1,null,"bea05df4",null),li=ai.exports;le()(ai,"components",{QForm:se["a"],QSelect:_n["a"],QImg:ri["a"],QBtn:W["a"]});var ci,ui,di,vi,pi,mi,fi,bi,hi,yi,gi,Si,Ci,ki,_i,wi,Oi,xi,Li=function(){var e=this,n=e._self._c;e._self._setupProxy;return n("result-chart-screen",{attrs:{result:e.saveResult.result,loading:e.loadingSave,"session-id":e.saveResult.session.id}})},ji=[],qi=(ci=Object($["a"])({name:"on-save"}),ui=Object($["c"])({type:Boolean}),di=Object($["c"])(),vi=Object($["c"])(),pi=Object($["c"])(),mi=Object($["c"])({type:Object}),ci((bi=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"tinyScreen",hi,P()(e)),L()(P()(e),"sessionConnection",yi,P()(e)),L()(P()(e),"loadingSave",gi,P()(e)),L()(P()(e),"saveResult",Si,P()(e)),L()(P()(e),"patient",Ci,P()(e)),e}return I()(t,[{key:"mounted",value:function(){console.log(this.saveResult)}}]),t}($["f"]),hi=E()(bi.prototype,"tinyScreen",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=E()(bi.prototype,"sessionConnection",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=E()(bi.prototype,"loadingSave",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=E()(bi.prototype,"saveResult",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ci=E()(bi.prototype,"patient",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fi=bi))||fi),Mi=qi,Ii=Mi,Ti=Object(H["a"])(Ii,Li,ji,!1,null,"2e7d1ab5",null),Pi=Ti.exports,Ri=t("9516"),Di=t("ac99"),Ai=t("448a"),zi=t.n(Ai),Bi=(t("e9c4"),t("4de4"),t("a434"),t("5a0c")),Ni=t.n(Bi),Qi="[WebSocket] Conexão com o sensor feita com websocket",Ei="[WebSocket] Websocket desconectado do servidor",$i="[WebSocket] Erro no servidor websocket",Vi=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;q()(this,e),this.availableSensorsList=[],this.registeredSensorsList=[],this.registeredSensorsIdList=[],this.sessionSocket=null,this.sessionLoadingRequest=!1,this.connectedBackend=!1,this.disableStart=!1,this.disableStop=!0,this.disableRestart=!0,this.measurementInProgress=!1,this.timeout=null,this.runTimer=null,this.time=null,this.onSensorConnect=n,this.onSensorDisconnect=t,this.onSensorError=s,this.onSessionConnect=i,this.onSessionDisconnect=o,this.onSessionErro=r,this.onAddInDev=a,this.useAlarm=!1,this.alarmTime=0}return I()(e,[{key:"notify",value:function(e,n){Z["a"].create({message:e,color:n,textColor:"white"})}},{key:"sendSocketMessage",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==e&&(null===e||void 0===e||e.send(JSON.stringify({origin:"FRONT",type:n,message:t})))}},{key:"loadingRequest",get:function(){return this.sessionLoadingRequest}},{key:"numberOfMeasurements",get:function(){var e,n,t;return null===(e=this.registeredSensorsList)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.gyro_measurements)||void 0===t?void 0:t.length}},{key:"blockSave",get:function(){return this.measurementInProgress}},{key:"inProgress",get:function(){return this.measurementInProgress}},{key:"isConnectedBackend",get:function(){return this.connectedBackend}},{key:"timeRunning",get:function(){return this.time}},{key:"disableStartBtn",get:function(){return this.disableStart||this.numberOfMeasurements>0}},{key:"disableStopBtn",get:function(){return this.disableStop}},{key:"disableRestartBtn",get:function(){return this.disableRestart}},{key:"connectSession",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localhost:8000";this.sessionSocket=new WebSocket("ws://".concat(n,"/socket"),["websocket"]),this.sessionSocket.onmessage=function(n){e.handleSessionMessage(JSON.parse(null===n||void 0===n?void 0:n.data))},this.sessionSocket.onopen=function(){var n;e.connectedBackend=!0,e.sendSocketMessage(e.sessionSocket,"GET_UPDATE_CLIENT_LIST"),e.notify(Qi,"positive"),null===(n=e.onSessionConnect)||void 0===n||n.call(e)},this.sessionSocket.onclose=function(){var n;e.notify(Ei,"warning"),e.connectedBackend=!1,null===(n=e.onSessionDisconnect)||void 0===n||n.call(e)},this.sessionSocket.onerror=function(){var n;e.notify($i,"error"),e.sessionSocket.close(),e.connectedBackend=!1,null===(n=e.onSessionErro)||void 0===n||n.call(e)}}},{key:"requestAvailableSensors",value:function(){this.sendSocketMessage(this.sessionSocket,"GET_UPDATE_CLIENT_LIST"),this.sessionLoadingRequest=!0}},{key:"handleSessionMessage",value:function(e){switch(null===e||void 0===e?void 0:e.type){case"UPDATE_CLIENT_LIST":this.availableSensorsList=null===e||void 0===e?void 0:e.message,this.sessionLoadingRequest=!1;break;case"SENSOR_DISCONNECTED":this.checkIfConnectedSession(null===e||void 0===e?void 0:e.message);break;default:break}}},{key:"updateSensor",value:function(e){var n=e.position,t=e.sensor,s=this.getIndexSensorInConnectedList(t);this.inProgress&&(this.stop(),this.restart()),this.registeredSensorsList[s].position=n}},{key:"numberOfValidConnection",get:function(){var e,n;return null===(e=this.registeredSensorsList)||void 0===e||null===(n=e.filter((function(e){return e.device.active})))||void 0===n?void 0:n.length}},{key:"filterSensorsConnected",get:function(){var e,n=this;return null===(e=this.availableSensorsList)||void 0===e?void 0:e.filter((function(e){var t=e.ip;return n.checkSensorConnected(t)}))}},{key:"checkSensorConnected",value:function(e){var n;return-1===(null===(n=this.registeredSensorsList)||void 0===n?void 0:n.findIndex((function(n){var t=n.device;return(null===t||void 0===t?void 0:t.ip)===e})))}},{key:"checkIfConnectedSession",value:function(e){var n=this.getIndexSensorInConnectedList(e);-1!==n&&(Z["a"].create({message:"Um sensor conectado a está sessão foi desconectado inesperadamente",textColor:"white",color:"error"}),this.stop())}},{key:"getIndexSensorInConnectedList",value:function(e){var n;return null===(n=this.registeredSensorsList)||void 0===n?void 0:n.findIndex((function(n){var t=n.device;return t.ip===e.ip}))}},{key:"checkIdInList",value:function(e){var n,t=null===(n=this.registeredSensorsIdList)||void 0===n?void 0:n.findIndex((function(n){return n===e}));return-1===t?e:this.checkIdInList(e+1)}},{key:"connect",value:function(){var e=O()(_()().mark((function e(n){var t,s,i,o,r=this;return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.getIndexSensorInConnectedList(n),-1===t&&(s=this.checkIdInList(0),this.registeredSensorsIdList.push(s),this.registeredSensorsList.push({sensorName:n.nameSensor,tabName:"Sensor_"+s,position:"",device:C()({id:s,active:!1,measurementInProgress:!1,connection:null},n),gyro_measurements:[]})),i=this.getIndexSensorInConnectedList(n),o="ws://".concat(this.registeredSensorsList[i].device.ip,":80/socket/session"),this.registeredSensorsList[i].device.connection=new WebSocket(o,["websocket"]),this.registeredSensorsList[i].device.connection.onmessage=function(e){r.handlerSensorMessage(JSON.parse(null===e||void 0===e?void 0:e.data),i)},this.registeredSensorsList[i].device.connection.onclose=function(){var e;r.notify(Ei+" do sensor","warning"),r.setDisconnected(i),r.stop(),null===(e=r.onSensorDisconnect)||void 0===e||e.call(r,{index:i,sensor:r.registeredSensorsList[i].device})},this.registeredSensorsList[i].device.connection.onerror=function(){var e;r.notify($i+" do sensor","error"),r.setDisconnected(i),r.stop(),r.registeredSensorsList[i].device.connection.close(),null===(e=r.onSensorError)||void 0===e||e.call(r,{index:i,sensor:r.registeredSensorsList[i].device})},this.registeredSensorsList[i].device.connection.onopen=function(){var e;r.notify(Qi+" do sensor","positive"),r.setConnected(i),null===(e=r.onSensorConnect)||void 0===e||e.call(r,{index:i,sensor:r.registeredSensorsList[i].device})};case 9:case"end":return e.stop()}}),e,this)})));function n(n){return e.apply(this,arguments)}return n}()},{key:"disconnect",value:function(e){var n,t,s,i=this.getIndexSensorInConnectedList(e);null===(n=this.registeredSensorsList[i])||void 0===n||null===(t=n.device)||void 0===t||null===(s=t.connection)||void 0===s||s.close()}},{key:"calibrate",value:function(e){var n,t,s=this.getIndexSensorInConnectedList(e);this.sendSocketMessage(null===(n=this.registeredSensorsList[s])||void 0===n||null===(t=n.device)||void 0===t?void 0:t.connection,"CALIBRATE",{cmd:4})}},{key:"closeAll",value:function(){var e,n;this.registeredSensorsList.length&&(null===(n=this.registeredSensorsList.filter((function(e){var n;return null===e||void 0===e||null===(n=e.device)||void 0===n?void 0:n.active})))||void 0===n||n.forEach((function(e){var n,t,s,i,o;null!==e&&void 0!==e&&null!==(n=e.device)&&void 0!==n&&n.connection&&(null===e||void 0===e||null===(t=e.device)||void 0===t||null===(s=t.connection)||void 0===s||s.stop(),null===e||void 0===e||null===(i=e.device)||void 0===i||null===(o=i.connection)||void 0===o||o.close())})));null!==this.timeout&&this.endTimer(),null===(e=this.sessionSocket)||void 0===e||e.close()}},{key:"remove",value:function(e){var n=this.getIndexSensorInConnectedList(e);this.inProgress&&(this.stop(),this.restart()),this.registeredSensorsList.splice(n,1)}},{key:"handlerSensorMessage",value:function(e,n){switch(null===e||void 0===e?void 0:e.type){case"MEASUREMENT_LIST":this.addMensuration(null===e||void 0===e?void 0:e.message,n);break;default:break}}},{key:"addMensuration",value:function(e,n){var t,s;null!==e&&void 0!==e&&e.length&&(null===(t=this.registeredSensorsList[n])||void 0===t||null===(s=t.gyro_measurements)||void 0===s||s.push.apply(s,zi()(e.filter((function(e){return null!==e})))))}},{key:"setDisconnected",value:function(e){this.registeredSensorsList[e].device.active=!1}},{key:"setConnected",value:function(e){this.registeredSensorsList[e].device.active=!0}},{key:"start",value:function(){var e=this;try{if(this.useAlarm&&this.alarmTime<1)return void Z["a"].create({message:"O valor do timer deve ser maior que 0",textColor:"white",color:"warning"});var n=!1;this.registeredSensorsList.map((function(t,s){var i,o,r,a;!0===(null===(i=e.registeredSensorsList[s])||void 0===i||null===(o=i.device)||void 0===o?void 0:o.active)&&(e.sendSocketMessage(null===(r=e.registeredSensorsList[s])||void 0===r||null===(a=r.device)||void 0===a?void 0:a.connection,"START",{cmd:1}),e.registeredSensorsList[s].device.measurementInProgress=!0,e.measurementInProgress=!0,n=!0)})),n&&(this.startTimer(),this.disableStart=!0,this.disableStop=!1,this.disableRestart=!1,this.disablePrev=!0)}catch(t){console.log(t)}}},{key:"restart",value:function(){var e=this,n=!1;this.registeredSensorsList.map((function(t,s){var i,o;!0===e.registeredSensorsList[s].device.active&&e.sendSocketMessage(null===(i=e.registeredSensorsList[s])||void 0===i||null===(o=i.device)||void 0===o?void 0:o.connection,"RESTART",{cmd:3});e.registeredSensorsList[s].device.measurementInProgress=!1,e.measurementInProgress=!1,e.registeredSensorsList[s].gyro_measurements=[],n=!0})),n&&(this.endTimer(),this.disableStart=!1,this.disableStop=!0,this.disableRestart=!0,this.disablePrev=!1)}},{key:"stop",value:function(){var e=this,n=!1;this.registeredSensorsList.map((function(t,s){var i,o;!0===e.registeredSensorsList[s].device.active&&e.sendSocketMessage(null===(i=e.registeredSensorsList[s])||void 0===i||null===(o=i.device)||void 0===o?void 0:o.connection,"STOP",{cmd:2});e.registeredSensorsList[s].device.measurementInProgress=!1,e.measurementInProgress=!1,n=!0})),n&&(this.endTimer(),this.disableStart=!1,this.disableStop=!0,this.disableRestart=!1,this.disablePrev=!1)}},{key:"startTimer",value:function(){var e=this;this.runTimer=0,this.time=null,this.timeout=setInterval((function(){e.runTimer=e.runTimer+1,e.time=Ni()().set("hour",0).set("minute",0).set("second",e.runTimer).format("HH:mm:ss"),console.log(e.time),e.useAlarm&&e.runTimer>=e.alarmTime&&(e.stop(),e.useAlarm=!1)}),1e3)}},{key:"endTimer",value:function(){clearTimeout(this.timeout),this.timeout=null,this.runTimer=null,this.time=null}},{key:"addTestReading",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;function t(e,n){return Math.random()*(n-e)+e}if(0===this.registeredSensorsList.length){var s=0;while(s<n){s++;var i=this.registeredSensorsList.length;this.registeredSensorsList.push({sensorName:"Sensor_"+i,position:"",tabName:"Sensor_"+i,device:{id:i,active:!0,measurementInProgress:!1,connection:null,ip:"192.168.16.10".concat(i)},gyro_measurements:[]})}this.disableRestart=!1}var o=0;while(o<365){var r;o++,null===(r=this.registeredSensorsList)||void 0===r||r.map((function(e,n){var s=e.gyro_measurements.length?e.gyro_measurements.length:0;e.gyro_measurements.push({sensorName:e.sensorName,hourMensuration:n,numberMensuration:s,Acc_X:n,Acc_Y:n,Acc_Z:n,AccelX_mss:n,AccelY_mss:n,AccelZ_mss:n,Gyr_X:n,Gyr_Y:n,Gyr_Z:n,Mag_X:n,Mag_Y:n,Mag_Z:n,Roll:t(90,80),Pitch:t(90,70),Yaw:t(90,70)})}))}null===(e=this.onAddInDev)||void 0===e||e.call(this)}}]),e}(),Gi=function(){function e(){q()(this,e)}return I()(e,null,[{key:"createSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onSensorConnect,t=void 0===n?null:n,s=e.onSensorDisconnect,i=void 0===s?null:s,o=e.onSensorError,r=void 0===o?null:o,a=e.onSessionConnect,l=void 0===a?null:a,c=e.onSessionDisconnect,u=void 0===c?null:c,d=e.onSessionError,v=void 0===d?null:d,p=e.onAddInDev,m=void 0===p?null:p;return new Vi(t,i,r,l,u,v,m)}}]),e}(),Yi=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2?arguments[2]:void 0;q()(this,e),this.steps=[{order:0,value:"init-session",label:"Selecionar procedimento"},{order:1,value:"select-sensor",label:"Ativar sensores"},{order:2,value:"run-procedure",label:"Captar medições"},{order:3,value:"on-save",label:"Salvo com sucesso"}],this.selectedStep=this.steps[0],this.onEnd=n,this.onStart=t,this.onCheckProcedures=s,this.started=!1}return I()(e,[{key:"actualStep",get:function(){return this.selectedStep}},{key:"actualStepOrder",get:function(){var e;return null===(e=this.actualStep)||void 0===e?void 0:e.order}},{key:"actualStepValue",get:function(){var e;return null===(e=this.actualStep)||void 0===e?void 0:e.value}},{key:"actualStepLabel",get:function(){var e;return null===(e=this.actualStep)||void 0===e?void 0:e.label}},{key:"next",value:function(){var e;if(this.actualStepOrder<this.steps.length)switch(this.actualStepOrder){case 0:this.nextStep();break;case 1:this.nextStep();break;case 2:null===(e=this.onCheckProcedures)||void 0===e||e.call(this);break}}},{key:"onSave",value:function(){if(this.actualStepOrder<this.steps.length)switch(this.actualStepOrder){case 0:case 1:case 2:case 3:this.selectedStep=this.steps.find((function(e){return"on-save"===e.value}));break}}},{key:"nextStep",value:function(){var e=this;this.selectedStep=this.steps.find((function(n){var t,s=n.order;return s===(null===(t=e.selectedStep)||void 0===t?void 0:t.order)+1}))}},{key:"prev",value:function(){var e,n=this;(null===(e=this.selectedStep)||void 0===e?void 0:e.order)>0&&(this.selectedStep=this.steps.find((function(e){var t,s=e.order;return s===(null===(t=n.selectedStep)||void 0===t?void 0:t.order)-1})))}}]),e}(),Fi=function(){function e(){q()(this,e)}return I()(e,null,[{key:"createNavigation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onEnd,t=void 0===n?null:n,s=e.onStart,i=void 0===s?null:s,o=e.onCheckProcedures,r=void 0===o?null:o;return new Yi(t,i,r)}}]),e}(),Zi=t("c2aa"),Ki=t("2ab1"),Xi=(ki=Object($["a"])({name:"new-session",components:{StepperFooter:ue,StepperHeader:On,SelectSensor:ms,RunProcedure:Vs,InitSession:li,OnSave:Pi}}),_i=Object($["c"])(),ki((Oi=function(e){D()(t,e);var n=z()(t);function t(){var e;q()(this,t);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),L()(P()(e),"id",xi,P()(e)),N()(P()(e),"loadingSave",!1),N()(P()(e),"navigation",Fi.createNavigation({onCheckProcedures:e.saveSession})),N()(P()(e),"sessionConnection",Gi.createSession()),N()(P()(e),"session",Zi["a"].create()),N()(P()(e),"fetchResult",null),N()(P()(e),"saveResult",null),N()(P()(e),"fetchData",Ki["a"].loadList({loadList:{metadata:Di["a"].getMetadata,patient:Ri["a"].getPatient},onLoad:function(n){var t,s,i=n.result;e.fetchResult=i,e.sessionConnection.connectSession(null===(t=e.fetchResult)||void 0===t||null===(s=t.metadata)||void 0===s?void 0:s.socket_url),e.session.load({metadata:i.metadata})}})),e}return I()(t,[{key:"inDev",get:function(){return!1}},{key:"beforeMount",value:function(){var e=O()(_()().mark((function e(){var n;return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=this.$route.query.id,G.a.isNil(n)){e.next=7;break}return e.next=5,this.fetchData.loadAll({patient:{options:{id:n}}});case 5:e.next=10;break;case 7:return Z["a"].create({message:"Sessões são criadas com um link do paciente",textColor:"white",color:"error"}),e.next=10,this.$router.push({path:"home"});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function n(){return e.apply(this,arguments)}return n}()},{key:"beforeDestroy",value:function(){this.sessionConnection.closeAll()}},{key:"saveSession",value:function(){var e=O()(_()().mark((function e(){var n,t;return _()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.loadingSave=!0,!this.session.checkMovementsMeasurements){e.next=5;break}return Z["a"].create({message:"Você deve ter captado alguma medição para completar esse procedimento!",textColor:"white",color:"error"}),e.abrupt("return",!1);case 5:return n={session:C()(C()({},this.session.values),{},{patientId:this.fetchData.result.patient.id})},e.next=8,Di["a"].postSession(n);case 8:t=e.sent,console.log(t),null!=t&&(this.saveResult=t,this.session.restart(),this.sessionConnection.restart(),this.navigation.onSave()),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:return e.prev=16,this.loadingSave=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,13,16,19]])})));function n(){return e.apply(this,arguments)}return n}()},{key:"isMobile",get:function(){return this.$q.screen.lt.sm}},{key:"isMdpi",get:function(){return this.$q.screen.lt.md}},{key:"isTinyScreen",get:function(){return this.isMdpi||this.isMobile}}]),t}($["f"]),xi=E()(Oi.prototype,"id",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wi=Oi))||wi),Ui=Xi,Hi=Ui,Wi=(t("12d4"),Object(H["a"])(Hi,y,g,!1,null,"159db425",null));n["default"]=Wi.exports},f137:function(e,n,t){"use strict";t("b2d9")}}]);