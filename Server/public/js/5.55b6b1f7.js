(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"3fa3":function(e,t,n){},5236:function(e,t,n){},"5d46":function(e,t,n){"use strict";n("3fa3")},"9eaa":function(e,t,n){"use strict";n("5236")},f2fc:function(e,t,n){"use strict";n.r(t);var a,s,i,o,r,c,l,u,d,p,f,g,v,h=function(){var e,t,n,a,s,i,o,r,c,l,u,d,p,f=this,g=f._self._c;f._self._setupProxy;return g("q-page",{staticClass:"home"},[f.fetchData.loading?g("loading-screen"):f.fetchData.hasError?g("error-screen"):null!==f.fetchData.result?g("div",{staticClass:"column justify-center content-center",staticStyle:{gap:"12px"}},[g("div",{staticClass:"flex justify-end"},[g("q-btn",{staticClass:"row",attrs:{color:"primary",dense:"",label:"Recarregar lista",size:"sm",loading:f.fetchData.loading},on:{click:function(e){return f.fetchData.loadAll()}}})],1),g("span",{staticClass:"col text-center"},[f._v("\n      Para configurar os sensores para realizar as medições é necessário\n      configurá los para sua rede wi-fi, conecte a rede wi-fi aberta geradas\n      pelos sensores e no navegador siga para o endereço a seguir.\n      "),g("a",{attrs:{href:"http://192.168.4.1",target:"_blank"}},[f._v("Sensor manager")])]),g("div",{staticClass:"ip"},[g("span",{staticClass:"col text-center m-t-12"},[f._v("\n        IP DO SERVIDOR PARA CONFIGURAR O SENSOR\n      ")]),null!==(e=f.fetchData)&&void 0!==e&&null!==(t=e.result)&&void 0!==t&&t.metadata?g("span",{staticClass:"col text-black text-center",staticStyle:{"font-size":"36px","font-weight":"bolder"}},[f._v("\n        "+f._s(null===(n=f.fetchData)||void 0===n||null===(a=n.result)||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.socket_url)+"\n      ")]):f._e()]),g("sensor-options",{attrs:{sensor:f.baseSensor,"connect-to-sensor":!0,suggestion:null===(i=f.fetchData)||void 0===i||null===(o=i.result)||void 0===o||null===(r=o.metadata)||void 0===r?void 0:r.socket_url}}),null!==(c=f.fetchData)&&void 0!==c&&null!==(l=c.result)&&void 0!==l&&null!==(u=l.listSensor)&&void 0!==u&&u.length?g("div",{staticClass:"ip"},[g("span",{staticClass:"col text-center m-t-20 m-b-12"},[f._v("IP DOS SENSORES DISPONÍVEIS")]),f._l(null===(d=f.fetchData)||void 0===d||null===(p=d.result)||void 0===p?void 0:p.listSensor,(function(e,t){var n,a;return g("div",{key:t},[g("sensor-options",{attrs:{sensor:e,"connect-to-sensor":!1,suggestion:null===(n=f.fetchData)||void 0===n||null===(a=n.result)||void 0===a?void 0:a.metadata}})],1)}))],2):f._e()],1):f._e()],1)},m=[],b=n("970b"),w=n.n(b),S=n("5bc3"),k=n.n(S),x=n("3c96"),y=n.n(x),_=n("ed6d"),C=n.n(_),D=n("2d0d"),P=n.n(D),O=n("9523"),I=n.n(O),q=n("53ec"),j=n.n(q),A=(n("99af"),n("e439"),n("1b40")),R=n("2ab1"),$=n("7ec2"),M=n.n($),Q=n("c973"),B=n.n(Q),E=n("23c8"),z=function(){function e(){w()(this,e)}return k()(e,[{key:"getSensorsList",value:function(){var e=B()(M()().mark((function e(){var t,n;return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["a"].get("/api/websocket/list");case 2:return t=e.sent,n=t.data,e.abrupt("return",null===n||void 0===n?void 0:n.content);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMetadata",value:function(){var e=B()(M()().mark((function e(){var t,n;return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E["a"].get("/api/websocket/metadata");case 2:return t=e.sent,n=t.data,e.abrupt("return",null===n||void 0===n?void 0:n.content);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),L=new z,N=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("q-item",{staticClass:"item item__inactive",class:{connected:"item__active"}},[t("div",{staticClass:"w-100"},[e.loading?t("div",{staticClass:"w-100 flex justify-center"},[t("q-spinner",{attrs:{size:"lg"}})],1):e._e(),e.loaded?t("div",{staticClass:"internal w-100"},[t("q-item-section",{staticClass:"row"},[t("q-item-label",[e._v(e._s(e.sensor.nameSensor||"Sem nome"))]),t("q-item-label",{attrs:{caption:""}},[t("a",{attrs:{href:"http://".concat(e.sensor.ip),target:"_blank"}},[e._v(e._s(e.sensor.ip))])]),t("div",{staticClass:"column",staticStyle:{"padding-top":"12px"}},[t("span",[e._v("Roll: "+e._s(e.measurement.Roll))]),t("span",[e._v("Pitch: "+e._s(e.measurement.Pitch))]),t("span",[e._v("Yaw: "+e._s(e.measurement.Yaw))]),t("q-btn",{staticClass:"row",attrs:{color:"primary",dense:"",label:"Medição",size:"sm",loading:e.loadingMeasurement},on:{click:function(t){return e.getSensorMeasurement()}}})],1)],1),t("q-form",{ref:"mainForm",staticClass:"column w-100"},[t("div",{staticClass:"row w-100 items-end",staticStyle:{display:"flex","flex-direction":"row",gap:"12px"}},[t("div",{staticClass:"col",staticStyle:{display:"flex","flex-direction":"column",gap:"12px","align-content":"flex-end"}},[t("q-select",{staticClass:"w-100",attrs:{options:e.config.wifiList,"emit-value":"",filled:"",dense:"",label:"Lista de wi-fi disponiveis","option-label":"ssid","option-value":"ssid"},on:{input:function(t){return e.changeSSID()}},model:{value:e.config.ssid,callback:function(t){e.$set(e.config,"ssid",t)},expression:"config.ssid"}}),t("q-input",{staticClass:"w-100",attrs:{rules:[e.$validators.notBlank],dense:"",filled:"",label:"SSID",type:"text"},model:{value:e.config.ssid,callback:function(t){e.$set(e.config,"ssid",t)},expression:"config.ssid"}})],1),t("div",{staticClass:"col",staticStyle:{height:"60px"}},[t("q-input",{staticClass:"row w-100",attrs:{rules:[e.$validators.notBlank],dense:"",filled:"",label:"SSID",type:"password"},model:{value:e.config.password,callback:function(t){e.$set(e.config,"password",t)},expression:"config.password"}})],1)]),t("div",{staticClass:"row w-100",staticStyle:{display:"flex","flex-direction":"row",gap:"12px"}},[t("q-input",{staticClass:"col",attrs:{rules:[e.$validators.notBlank],placeholder:e.suggestion.url,filled:"",dense:"",label:"Backend IP"},model:{value:e.config.backend,callback:function(t){e.$set(e.config,"backend",t)},expression:"config.backend"}}),t("q-input",{staticClass:"col",attrs:{rules:[e.$validators.notBlank],dense:"",placeholder:e.suggestion.port,filled:"",label:"Backend Port"},model:{value:e.config.backendPort,callback:function(t){e.$set(e.config,"backendPort",t)},expression:"config.backendPort"}})],1),t("q-input",{staticClass:"row",attrs:{rules:[e.$validators.notBlank],dense:"",filled:"",label:"Nome do sensor"},model:{value:e.config.nameSensor,callback:function(t){e.$set(e.config,"nameSensor",t)},expression:"config.nameSensor"}}),t("q-btn",{attrs:{color:"primary",label:"Salvar",size:"sm",dense:"",unelevated:"",loading:e.loadingSave},on:{click:e.postSensorConfig}})],1)],1):e._e(),e.loading||e.loaded||!e.connectToSensor?e._e():t("div",{staticClass:"w-100 flex justify-center items-center",staticStyle:{"vertical-align":"center",height:"100%","font-weight":"600"}},[t("span",{staticClass:"text-center"},[e._v("Não está conectado a rede de um sensor")])])])])},T=[],U=n("ded3"),F=n.n(U),Y=n("c86f"),J=n.n(Y),V=(n("d400"),n("ac1f"),n("5319"),n("cee4")),G=n("1d9a"),H=n("2a19"),K=(a=Object(A["a"])({name:"sensor-options"}),s=Object(A["c"])(),i=Object(A["c"])(),o=Object(A["c"])({type:Boolean,default:!1}),a((c=function(e){C()(n,e);var t=P()(n);function n(){var e;w()(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),I()(y()(e),"Axios",null),I()(y()(e),"loading",!1),I()(y()(e),"loadingSave",!1),I()(y()(e),"loadingMeasurement",!1),I()(y()(e),"loaded",!1),I()(y()(e),"config",{ssid:"",password:"",backend:"",backendPort:"",nameSensor:"",wifiList:[]}),I()(y()(e),"measurement",{Roll:0,Pitch:0,Yaw:0}),J()(y()(e),"sensor",l,y()(e)),J()(y()(e),"suggestion",u,y()(e)),J()(y()(e),"connectToSensor",d,y()(e)),e}return k()(n,[{key:"showCard",get:function(){return!this.connectToSensor||this.loaded}},{key:"created",value:function(){var e=B()(M()().mark((function e(){return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.connectToSensor?this.sensor["ip"]="192.168.4.1":this.sensor.ip=this.sensor.ip.replace(/['"!@#$%^&*]/g,""),null===this.sensor){e.next=6;break}return this.Axios=V["a"].create({baseURL:"http://".concat(this.sensor.ip,":80")}),e.next=6,this.getSensorInfo();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSensorInfo",value:function(){var e=B()(M()().mark((function e(){var t,n;return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.Axios.get("/api/configuration");case 4:t=e.sent,n=t.data,this.config=F()({},n),this.loaded=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[0,10,13,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSensorMeasurement",value:function(){var e=B()(M()().mark((function e(){var t,n;return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingMeasurement=!0,e.next=4,this.Axios.get("/api/measurement");case 4:t=e.sent,n=t.data,"UNIQUE_MEASUREMENT"===(null===n||void 0===n?void 0:n.type)&&(this.measurement=F()({},n.message)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:return e.prev=12,this.loadingMeasurement=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,9,12,15]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"postSensorConfig",value:function(){var e=B()(M()().mark((function e(){var t,n;return M()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingSave=!0,e.next=4,G["a"].validateAsync(this.$refs.mainForm);case 4:return t={ssid:this.config.ssid,password:this.config.password,backend:this.config.backend,backendPort:this.config.backendPort,nameSensor:this.config.nameSensor},e.next=7,this.Axios.post("/api/configuration",{},{params:F()({},t)});case 7:n=e.sent,H["a"].create({message:"Modulo será reiniciado e ficara temporariamente indisponível.",textColor:"white",color:"success"}),console.log(n),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:return e.prev=15,this.loadingSave=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[0,12,15,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"changeSSID",value:function(){this.config.password=""}}]),n}(A["f"]),l=j()(c.prototype,"sensor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=j()(c.prototype,"suggestion",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=j()(c.prototype,"connectToSensor",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r=c))||r),W=K,X=W,Z=(n("5d46"),n("2877")),ee=n("66e5"),te=n("0d59"),ne=n("4074"),ae=n("0170"),se=n("9c40"),ie=n("0378"),oe=n("ddd8"),re=n("27f9"),ce=n("eebe"),le=n.n(ce),ue=Object(Z["a"])(X,N,T,!1,null,"0ca128f5",null),de=ue.exports;le()(ue,"components",{QItem:ee["a"],QSpinner:te["a"],QItemSection:ne["a"],QItemLabel:ae["a"],QBtn:se["a"],QForm:ie["a"],QSelect:oe["a"],QInput:re["a"]});var pe=(p=Object(A["a"])({name:"home",components:{SensorOptions:de}}),f=Object(A["g"])("fetchData.loading"),p((v=function(e){C()(n,e);var t=P()(n);function n(){var e;w()(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s)),I()(y()(e),"fetchData",R["a"].loadList({loadList:{metadata:L.getMetadata,listSensor:L.getSensorsList},auto:!0})),I()(y()(e),"baseSensor",{nameSensor:"To Config",ip:"192.168.4.1"}),e}return k()(n,[{key:"loading",value:function(){console.log(this.fetchData.result)}}]),n}(A["f"]),j()(v.prototype,"loading",[f],Object.getOwnPropertyDescriptor(v.prototype,"loading"),v.prototype),g=v))||g),fe=pe,ge=fe,ve=(n("9eaa"),n("9989")),he=Object(Z["a"])(ge,h,m,!1,null,"598a00fa",null);t["default"]=he.exports;le()(he,"components",{QPage:ve["a"],QBtn:se["a"]})}}]);